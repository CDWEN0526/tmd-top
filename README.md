<img src="image/logo.png" alt="logo" style="zoom:150%;" />

------



###  üåà Introduce

|üåê[[ ‰∏≠ÊñáËØ¥Êòé ](/zh-README.md)]  |üåê [[ English   Introduction ](/README.md)] |

 üòàüñïTMD-TOP is a network traffic monitoring tool specifically designed for  Linux terminals. It provides real-time displays of server connections to various client IPs, upload and download speeds, and bandwidth usage. By deeply analyzing the impact of different services and scripts on  network resources, it assists administrators in quickly identifying and  optimizing high-bandwidth-consuming services to ensure efficient and  stable system performance. With its clean and readable tabular view and  flexible filtering functions, TMD-TOP is an ideal assistant for  administrators to perform network management and performance tuning. 

**Give it a star ‚≠ê if you find it useful (it's very important to me).**

![1735010841599](image/1735010841599.png)

### üî® Version Requirements

 **‚ö†Ô∏èonticeÔºö**

```txt
python >= 3.8

Linux system
```

###  üåà Install

```shell
sudo pip install tmd-top
```

### üîÑUpdate

```shell
sudo pip install --upgrade tmd-top
```

### üìñUsage Instructions

Run the tmd-top command on the terminal

```shell
root@davin-system:~/tmd-top# tmd-top
or
root@davin-system:~/tmd-top# tmd
```

### ‚å®Ô∏è Shortcut Commands

![1735011021986](image/1735011021986.png)

| Âø´Êç∑Êåá‰ª§ | Description                |
| -------- | -------------------------- |
| q        | Exit                       |
| v        | Search by entering a PID   |
| t        | Slow Down Data Refresh     |
| y        | Restore Data Refresh Speed |
| c        | Sort by Connections        |
| i        | Sort by IP Count           |
| u        | Sort by Upload             |
| d        | Sort by Download           |
| z        | Sort by CPU Usage          |
| x        | Sort by Memory Usage       |



### üó∫Ô∏èIP Recognition

 **Data Source**: IP recognition is implemented using GeoIP. The current GeoIP data was last updated on:   ‚åöÔ∏è 2024-12-20



### üìä Data Display Diagrams

#### Server Listening Services

Listening services generally refer to the services listened by ss -tunpl.

![1735011128390](image/1735011128390.png)

####  Server Running Programs 

 Running programs refer to the TCP connections generated by resident  processes running on the server, such as web crawler scripts, programs  connecting to databases, etc. 

![1735011298226](image/1735011298226.png)

####  Server Network Interface Traffic 

 Total traffic across all network interfaces within the server 

![1735011463080](image/1735011463080.png)

####  Detailed Client Traffic 

 Clicking on the tables for `Listening Services` or `Running Programs` will display detailed TCP traffic information, including how many  connections a service has established, and with which IP and port a  connection was made. For example, for my MySQL port 3306, after clicking MySQL in `Listening Services`, it will show which clients are connected to my database and how much bandwidth they are consuming. 

![1735011553325](image/1735011553325.png)

#### üîç Search

It will help you search for the results you want within `Listening Services`, `Running Programs`, and `Details` based on the content you input, supporting fuzzy search.

You can search for: `pid`, `service`, `port`, etc

![1735011756371](image/1735011756371.png)

For example: Search for `nginx`

![1735011911207](image/1735011911207.png)

#### üõ†Ô∏èButton

`Export IPs to ./ip.txt`: This will export the IP information from the current `Details` view to an`ip.txt` file in the current directory, facilitating troubleshooting.

![1735011991318](image/1735011991318.png)

`IP Ban`: This feature calls the system's `iptables` method, so please use it with caution. Select an IP you want to ban in the `Details` table using your mouse, then click the `IP Ban` button. A warning box will prompt you to confirm whether to ban the selected IP. (Note: Not recommended due to the risks involved with banning IPs.)

![1735012229101](image/1735012229101.png)



**üíª Language Switching **

TMD-TOP also detects and switches between Chinese and English based on the operating system's language environment. If it detects a Chinese system environment, TMD-TOP will display the interface in Chinese; similarly, it will display in English for an English environment. For instructions on how to set the operating system's language, please refer to online resources such as Baidu.

 Determine System Language 

```shell
[root@test ~]# locale     #‰∏≠ÊñáÁéØÂ¢É
LANG=zh_CN.UTF-8
LC_CTYPE="zh_CN.UTF-8"
LC_NUMERIC="zh_CN.UTF-8"
LC_TIME="zh_CN.UTF-8"
LC_COLLATE="zh_CN.UTF-8"
LC_MONETARY="zh_CN.UTF-8"
LC_MESSAGES="zh_CN.UTF-8"
LC_PAPER="zh_CN.UTF-8"
LC_NAME="zh_CN.UTF-8"
LC_ADDRESS="zh_CN.UTF-8"
LC_TELEPHONE="zh_CN.UTF-8"
LC_MEASUREMENT="zh_CN.UTF-8"
LC_IDENTIFICATION="zh_CN.UTF-8"
LC_ALL=

root@test ~# locale    #English environment
LANG=en_US.UTF-8
LANGUAGE=
LC_CTYPE="en_US.UTF-8"
LC_NUMERIC="en_US.UTF-8"
LC_TIME="en_US.UTF-8"
LC_COLLATE="en_US.UTF-8"
LC_MONETARY="en_US.UTF-8"
LC_MESSAGES="en_US.UTF-8"
LC_PAPER="en_US.UTF-8"
LC_NAME="en_US.UTF-8"
LC_ADDRESS="en_US.UTF-8"
LC_TELEPHONE="en_US.UTF-8"
LC_MEASUREMENT="en_US.UTF-8"
LC_IDENTIFICATION="en_US.UTF-8"
LC_ALL=

```



### üí° Creative Ideas 

  As a Linux administrator, I found the traffic view function of  FinalShell to be extremely efficient and practical when troubleshooting  network issues. Although I have tried tools like iftop and nload, their  usability and visualization effects were not as good as those of  FinalShell. Therefore, relying on the traffic monitoring features of  FinalShell, I decided to develop a more intuitive and precise network  traffic monitoring tool inspired by its design philosophy to meet  professional needs.   

### üèóÔ∏è  Software Architecture 

1. Data Collection Module: This module collects real-time status information about internal TCP connections within the server by executing LinuxÂ∫ïÂ±ÇÂëΩ‰ª§Ôºàsuch as netstatÔºâusing Python's subprocess or os libraries. The collected information includes, but is not limited to, client IP, port, connection state, transmission rate, and other key metrics.
2. Database Storage Module: Utilizing SQLite as a local persistence storage solution, this module structures the collected TCP connection data into database tables. It is responsible for creating and managing database connections, as well as executing SQL insert operations.
3. Data Processing Module: This module preprocesses and formats raw data, such as converting it into a suitable format for storing in SQLite, and may further analyze the data to calculate advanced statistical indicators like upload/download speed per second, concurrent connections, etc.
4. User Interface Display Module: Based on the Textual library, this module constructs a terminal interface that dynamically displays TCP connection statistics read from the database.



 ‚òï  Buy the Author a Coffee 

 If this project has helped you and solved your problems, consider buying the author a coffee!!! 

![ËæìÂÖ•ÂõæÁâáËØ¥Êòé](image/4.jpg)